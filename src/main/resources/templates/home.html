<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{fragments/head.html::html_head('SIESTA')}"></head>

<body>
<script>
    window.tabOpen = null;
</script>

<div class="mdl-list">
    <div th:replace="~{fragments/sidebar :: sidebar}"></div>

    <div class="home-container">
        <div th:replace="~{fragments/navigation_bar :: navbar('')}"></div>

        <div id="main-panel">

        </div>

    </div>


</div>
<script th:src="@{/js/metadata.js}"></script>
<script th:src="@{/js/pattern_detection.js}"></script>
<!-- Chart.js -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>


<script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-zoom@2.0.1/dist/chartjs-plugin-zoom.min.js"></script>

<!--components-->
<script th:src="@{/js/components/expandable_card.js}"></script>
<script th:src="@{/js/components/refresh_button.js}"></script>
<script th:src="@{/js/components/event_search_bar.js}"></script>

<script>
    document.addEventListener("DOMContentLoaded", () => {
        const path = window.location.pathname;
        const params = new URLSearchParams(window.location.search);
        const logname = params.get("logname") || "";
        console.log("DOM loaded, path: " + path + "")
        // Load sidebar first, then do tab logic
        loadSidebar("", () => {
            if (path.includes("pattern-detection")) {
                patternDetectionTab(false);
            }else if (path.includes("metadata") && logname) {
                metadataLog(logname);
            }else if (path.includes("preprocess")) {
                processTab(false);
            }
        });
    });

</script>
</body>
</html>